<!DOCTYPE html>
<html>

<head>
  <title>Example: Graticule</title>
  <meta charset="utf-8">
  <meta name="description" content="Benchmark for the rust d3 geo voronoi project.">
</head>

<body>
  <h1>Example: Graticule</h1>
  <h2>Rust d3 geo</h2>
  <p>Example graticules render to both a Canvas and SVG element</p>
  <p>Canvas</p>
  <canvas id="c" width="500" height="600"></canvas>
  <p>SVG</p>
  <svg id="s" width="500" height="600">
    <style>
      path {
        fill: None;
        stroke: maroon;
        stroke-width: 2px;
      }
    </style>
  </svg>

  <svg id="s_mls" width="500" height="600">
    <style>
      path {
        fill: None;
        stroke: maroon;
        stroke-width: 2px;
      }
    </style>
  </svg>

  <svg id="s_polygon" width="500" height="600">
    <style>
      path {
        fill: None;
        stroke: maroon;
        stroke-width: 2px;
      }
    </style>
  </svg>

  <svg id="s_multipolygon" width="500" height="600">
    <style>
      path {
        fill: None;
        stroke: maroon;
        stroke-width: 2px;
      }
    </style>
  </svg>

  <svg id="s_multipolygon_js" width="500" height="600">
    <style>
      path {
        fill: None;
        stroke: maroon;
        stroke-width: 2px;
      }
    </style>
  </svg>
  <noscript>This page contains webassembly and javascript content, please enable javascript in your browser.</noscript>
  <script src="./index.js"></script>

  <script type="module">
    import { geoCircle, geoGraticule, geoOrthographic, geoPath } from "https://cdn.skypack.dev/d3-geo@3";
    const svg = document.getElementById("s_multipolygon_js");
    const width = svg.width.baseVal.value;
    const height = svg.height.baseVal.value;
    const ortho = geoOrthographic()
      .scale(240)
      .translate([width / 2, height / 2])
      .rotate([0, -20, 0]);

    const geoGenerator = geoPath().projection(ortho);

    console.log("building g");
    const graticule = geoGraticule();
    const coords = graticule();
    // console.log(graticule);

    const polygon = [];
    for (const c in coords) {
      polygon.push(
        { type: 'polygon', coordinates: c }
      );
    }

    const d = geoGenerator(graticule());

    var element = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    element.setAttributeNS(null, "d", d);
    svg.appendChild(element);


  </script>
</body>

</html>
