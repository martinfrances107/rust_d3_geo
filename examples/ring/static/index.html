<!DOCTYPE html>
<html>

<head>
  <title>Example: Rings</title>
  <meta charset="utf-8">
  <meta name="description" content="Example for the rust d3 geo project.">
</head>

<body>
  <h1>Example: Rings</h1>
  <h2>Rust d3 geo</h2>
  <p>Example rings SVG </p>
  <p>SVG</p>
  <canvas id="c"></canvas>
  <svg id="rust" width="500" height="600">
    <style>
      path {
        fill: None;
        stroke: maroon;
        stroke-width: 2px;
      }
    </style>
  </svg>

  <svg id="ring_js" width="500" height="600">
    <style>
      path {
        fill: black;
        stroke: maroon;
        stroke-width: 2px;
      }
    </style>
  </svg>

  <noscript>This page contains webassembly and javascript content, please enable javascript in your browser.</noscript>
  <script src=" ./index.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.2/d3.min.js"></script>

  <script>

    const svg = document.getElementById("ring_js");
    width = svg.width.baseVal.value;
    height = svg.height.baseVal.value;
    console.log(width);
    console.log(height);

    const geoCircle = d3.geoCircle;
    const geoPath = d3.geoPath;

    const ortho = d3.geoOrthographic()
      .scale(240)
      .translate([width / 2, height / 2])
      .rotate([0, 0, 0]);

    let gc_outer = geoCircle().radius(10);
    let gc_inner = geoCircle().radius(5);

    let coordinates = [];
    for (let lat = -30; lat <= 30; lat += 30) {
      for (let long = -180; long < 180; long += 40) {
        poly = [
          gc_outer.center([long, lat])().coordinates[0],
          gc_inner.center([long, lat])().coordinates[0].reverse()
        ];

        coordinates.push(
          poly
        );
      }
    }

    let object = {
      type: "MultiPolygon",
      coordinates: coordinates
    };

    let d = geoPath()
      .projection(ortho).pointRadius(10)(object);

    var element = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    element.setAttributeNS(null, "d", d);
    svg.appendChild(element);


  </script>
</body>

</html>
